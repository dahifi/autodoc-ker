{
  "fileName": "parallax.js",
  "filePath": "src/scene/shader-lib/chunks/standard/frag/parallax.js",
  "url": "https://github.com/playcanvas/engine/src/scene/shader-lib/chunks/standard/frag/parallax.js",
  "summary": "The code above is a GLSL shader code that defines a function called `getParallax()`. This function is used to calculate the parallax effect for a material in the PlayCanvas engine. The parallax effect is a technique used to create the illusion of depth on a 2D surface by simulating the displacement of pixels based on their perceived depth.\n\nThe function takes a uniform variable called `material_heightMapFactor` which is used to scale the height map values. The height map is a texture that stores the height information of the material. The `parallaxScale` variable is calculated by multiplying the `material_heightMapFactor` with the height value obtained from the height map texture.\n\nThe height value is obtained by sampling the height map texture using the `texture2DBias()` function. The `textureBias` parameter is used to adjust the sampling position to avoid texture aliasing. The `$SAMPLER` and `$UV` parameters are placeholders for the actual texture sampler and UV coordinates respectively. The `$CH` parameter is a placeholder for the channel of the texture to sample.\n\nThe sampled height value is then multiplied by the `parallaxScale` and subtracted by `parallaxScale*0.5` to center the displacement. The `viewDirT` variable is calculated by transforming the view direction vector `dViewDirW` into tangent space using the `dTBN` matrix. The `z` component of `viewDirT` is then increased by `0.42` to adjust the parallax effect.\n\nFinally, the `dUvOffset` variable is calculated by multiplying the height value with the ratio of `viewDirT.xy` to `viewDirT.z`. This offset is then used to displace the texture coordinates in the vertex shader to create the parallax effect.\n\nIn the larger project, this code is used as a part of the material system in the PlayCanvas engine to create realistic 3D graphics. The `getParallax()` function is called by the material shader to calculate the parallax effect for the material. The resulting offset is then used to displace the texture coordinates in the vertex shader to create the illusion of depth. This technique is commonly used in games and other real-time 3D applications to create more realistic and immersive environments.",
  "questions": "1. What is the purpose of the `material_heightMapFactor` uniform variable?\n- The `material_heightMapFactor` uniform variable is used to set the scale of the parallax effect.\n\n2. What is the input for the `getParallax()` function?\n- The `getParallax()` function takes no input parameters.\n\n3. What is the output of the `getParallax()` function?\n- The `getParallax()` function sets the value of the `dUvOffset` variable, which is used to offset the texture coordinates in order to create the parallax effect."
}